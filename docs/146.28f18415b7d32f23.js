"use strict";(self.webpackChunkone_piece_shop=self.webpackChunkone_piece_shop||[]).push([[146],{6146:(L,m,c)=>{c.r(m),c.d(m,{AdminModule:()=>R});var a=c(6019),s=c(8651),t=c(3019),p=c(5071),d=c(1288);const A=function(){return["orders"]},_=function(){return["products"]};let C=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-admin-nav"]],decls:8,vars:4,consts:[[1,"adminNav","navbar-default","nav","background","navbar"],[1,"navbar-collapse"],["routerLinkActive","activeLink",3,"routerLink"]],template:function(e,n){1&e&&(t.TgZ(0,"nav",0),t.TgZ(1,"ul"),t.TgZ(2,"li",1),t.TgZ(3,"a",2),t._uU(4,"Open Orders"),t.qZA(),t.qZA(),t.TgZ(5,"li",1),t.TgZ(6,"a",2),t._uU(7,"Edit ShopItems"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("routerLink",t.DdM(2,A)),t.xp6(3),t.Q6J("routerLink",t.DdM(3,_)))},directives:[d.yS,d.Od],styles:[".adminNav[_ngcontent-%COMP%]{margin:10px auto;padding:10px;width:60%;text-align:center;justify-content:space-evenly;border:none}ul[_ngcontent-%COMP%]{list-style-type:none}"]}),r})();function T(r,o){1&r&&t._UZ(0,"app-admin-nav")}let b=(()=>{class r{constructor(e){this.authService=e,this.isAdmin=!1,this.isAdminMethod=this.authService.user.subscribe(n=>{this.isAdmin="ADMIN"==n.roles[0].role})}ngOnInit(){}ngOnDestroy(){this.isAdminMethod.unsubscribe()}logOut(){this.authService.logOut()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(p.e))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-admin"]],decls:8,vars:1,consts:[[4,"ngIf"],[1,"cssSelections"],[1,"cssSelection","logout","background"],[1,"col-xs-9"],[1,"col-xs-3","btn","btn-out","btn-danger",3,"click"]],template:function(e,n){1&e&&(t.YNc(0,T,1,0,"app-admin-nav",0),t.TgZ(1,"article",1),t.TgZ(2,"section",2),t.TgZ(3,"p",3),t._uU(4,"You can log out when ever you would need."),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return n.logOut()}),t._uU(6,"Log Out"),t.qZA(),t.qZA(),t._UZ(7,"router-outlet"),t.qZA()),2&e&&t.Q6J("ngIf",n.isAdmin)},directives:[a.O5,d.lC,C],styles:[".btn-out[_ngcontent-%COMP%]{border:2px solid var(--master_third_color_darker);background:var(--master_third_color)!important}.logout[_ngcontent-%COMP%]{height:70px;justify-content:space-between}"]}),r})();var O=c(3298),l=c(3994);function q(r,o){if(1&r&&(t.TgZ(0,"span"),t._UZ(1,"br"),t._uU(2),t._UZ(3,"br"),t.qZA()),2&r){const e=o.$implicit;t.xp6(2),t.AsE(" ",e.product.name," - ",e.amount,"")}}let y=(()=>{class r{constructor(e){this.orderService=e}ngOnInit(){}onChangeConfirmation(){this.order.completed=!this.order.completed,this.orderService.updateOrder(this.order)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(l.p))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-order"]],inputs:{index:"index",order:"order"},decls:15,vars:5,consts:[[1,"list-group-item","col-xs-12","background"],[1,"col-xs-10"],[4,"ngFor","ngForOf"],[1,"col-xs-2"],["type","button",1,"btn",3,"ngClass"]],template:function(e,n){1&e&&(t.TgZ(0,"li",0),t.TgZ(1,"div",1),t._uU(2," Amount of Products:"),t.TgZ(3,"span"),t._uU(4),t.qZA(),t._UZ(5,"br"),t._uU(6," Products:"),t.YNc(7,q,4,2,"span",2),t._uU(8," Total Price: "),t.TgZ(9,"span"),t._uU(10),t.qZA(),t._UZ(11,"br"),t.qZA(),t.TgZ(12,"div",3),t.TgZ(13,"button",4),t._uU(14),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Oqu(n.order.cart.amountOfProducts),t.xp6(3),t.Q6J("ngForOf",n.order.cart.cartItems),t.xp6(3),t.hij("\u20ac",n.order.cart.totalPrice,""),t.xp6(3),t.Q6J("ngClass",n.order.completed?"btn-danger":"btn-success"),t.xp6(1),t.hij(" ",n.order.completed?"Disconfirm":"Confirm"," "))},directives:[a.sg,a.mk],styles:["button[_ngcontent-%COMP%]{min-height:50px}span[_ngcontent-%COMP%]{text-align:right;color:var(--master_secundairy_color)}"]}),r})();function I(r,o){if(1&r&&t._UZ(0,"app-order",3),2&r){const n=o.index;t.Q6J("order",o.$implicit)("index",n)}}let P=(()=>{class r{constructor(e,n,i){this.orderHandlingService=e,this.orderService=n,this.authService=i,this.orders=[]}ngOnInit(){this.setSubscription()}setSubscription(){this.ordersSubscription=this.orderService.orderEvent.subscribe(e=>{console.log(e),this.orders=e}),this.isAdmin="ADMIN"==this.authService.user.value.roles[0].role}ngOnDestroy(){this.ordersSubscription.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(O.M),t.Y36(l.p),t.Y36(p.e))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-orders"]],decls:13,vars:1,consts:[[1,"container","col-xs-12"],[1,"container-fluid"],[3,"order","index",4,"ngFor","ngForOf"],[3,"order","index"]],template:function(e,n){1&e&&(t.TgZ(0,"article",0),t.TgZ(1,"section",1),t.TgZ(2,"section",1),t.TgZ(3,"h1"),t._uU(4,"Here are the placed orders"),t.qZA(),t.TgZ(5,"p"),t._uU(6,"please press the button next to them to complete it."),t.qZA(),t.qZA(),t.TgZ(7,"section",1),t.TgZ(8,"div"),t.TgZ(9,"h3"),t._uU(10,"Orders"),t.qZA(),t.qZA(),t.TgZ(11,"ul"),t.YNc(12,I,1,2,"app-order",2),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(12),t.Q6J("ngForOf",n.orders))},directives:[a.sg,y],styles:["h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:var(--master_third_color)}p[_ngcontent-%COMP%]{color:var(--white)}"]}),r})();var x=c(6147),g=c(7534);let S=(()=>{class r{constructor(e,n){this.requestService=e,this.orderService=n}resolve(e,n){const i=this.orderService.getOrders();return void 0===i.length||0===i.length?this.requestService.requestOfOrder("all","get",null):i}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(g.s),t.LFG(l.p))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var h=c(7296);let v=(()=>{class r{constructor(e,n,i,u){this.route=e,this.activeRoute=n,this.productService=i,this.requestService=u,this.isEditing=!1}ngOnInit(){this.initForm(),this.startSubscribe()}startSubscribe(){this.activeRoute.queryParams.subscribe(e=>{this.currentId=+e[0],this.index=+e[1],this.isEditing=!isNaN(+e[0]),this.initForm()})}initForm(){let e="",n="",i=0,u="",f="";this.isEditing&&(this.product=this.productService.getProduct(this.index),e=this.product.name,n=this.product.description,i=this.product.price,u=this.product.category,f=this.product.imagePath),null==e&&this.initForm(),this.editItemForm=new s.cw({name:new s.NI(e,s.kI.required),description:new s.NI(n,s.kI.required),price:new s.NI(i,s.kI.required),category:new s.NI(u,s.kI.required),imagePath:new s.NI(f,s.kI.required)})}onSubmit(){this.isEditing?(this.productService.updateProduct(this.index,this.editItemForm.value),this.product=this.editItemForm.value,this.saveChanges("put",this.currentId.toString())):(this.productService.addProduct(this.product=this.editItemForm.value),this.saveChanges("put","new")),this.redirect()}saveChanges(e,n){this.requestService.requestOfProduct(n,e,this.product).subscribe()}onDelete(){this.productService.deleteProduct(this.currentId),this.saveChanges("delete",this.currentId.toString()),this.redirect()}redirect(){this.editItemForm.reset(),this.isEditing=!1,this.route.navigate(["../products"],{relativeTo:this.activeRoute,queryParams:[null]})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(d.F0),t.Y36(d.gz),t.Y36(h.M),t.Y36(g.s))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-edit-item"]],decls:39,vars:5,consts:[[1,"col-xs-12"],[1,"editItemForm",3,"formGroup","ngSubmit"],[1,"row"],["type","submit",1,"btn","btn-prem",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-prem",3,"click"],[1,"form-group"],["for","name"],["formControlName","name","type","text","id","name",1,"form-control"],["for","price"],["formControlName","price","type","text","id","price",1,"form-control"],["for","imagePath"],["formControlName","imagePath","type","text","id","imagePath",1,"form-control"],["for","category"],["formControlName","category","type","text","id","category",1,"form-control"],[1,"img-responsive",3,"src"],["for","description"],["formControlName","description","id","description","rows","6",1,"form-control"]],template:function(e,n){1&e&&(t.TgZ(0,"section",0),t.TgZ(1,"form",1),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(2,"div",2),t.TgZ(3,"div",0),t.TgZ(4,"button",3),t._uU(5),t.qZA(),t.TgZ(6,"button",4),t.NdJ("click",function(){return n.onDelete()}),t._uU(7),t.qZA(),t.TgZ(8,"button",5),t.NdJ("click",function(){return n.redirect()}),t._uU(9,"New"),t.qZA(),t.qZA(),t.TgZ(10,"div",2),t.TgZ(11,"div",0),t.TgZ(12,"div",6),t.TgZ(13,"label",7),t._uU(14,"Name of Product"),t.qZA(),t._UZ(15,"input",8),t.qZA(),t.qZA(),t.TgZ(16,"div",0),t.TgZ(17,"div",6),t.TgZ(18,"label",9),t._uU(19,"Price"),t.qZA(),t._UZ(20,"input",10),t.qZA(),t.qZA(),t.TgZ(21,"div",0),t.TgZ(22,"div",6),t.TgZ(23,"label",11),t._uU(24,"Image URL"),t.qZA(),t._UZ(25,"input",12),t.qZA(),t.qZA(),t.TgZ(26,"div",0),t.TgZ(27,"div",6),t.TgZ(28,"label",13),t._uU(29,"Category's (split by ',' )"),t.qZA(),t._UZ(30,"input",14),t.qZA(),t.qZA(),t.TgZ(31,"div",0),t.TgZ(32,"div",6),t._UZ(33,"img",15),t.qZA(),t.qZA(),t.TgZ(34,"div",0),t.TgZ(35,"div",6),t.TgZ(36,"label",16),t._uU(37,"description"),t.qZA(),t._UZ(38,"textarea",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("formGroup",n.editItemForm),t.xp6(3),t.Q6J("disabled",!n.editItemForm.valid),t.xp6(1),t.Oqu(n.isEditing?"Save":"Add"),t.xp6(2),t.Oqu(n.isEditing?"Remove":"Clear"),t.xp6(26),t.Q6J("src",n.editItemForm.get("imagePath").value,t.LSH))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u],styles:[".editItemForm[_ngcontent-%COMP%]{color:var(--master_third_color_darker);font-weight:600}selection[_ngcontent-%COMP%]{top:10px}"]}),r})(),U=(()=>{class r{constructor(e,n){this.router=e,this.activatedRoute=n}ngOnInit(){}getProductNumber(){return Number(this.product.productNumber).toString()}changeRoute(){this.router.navigate([this.getProductNumber()],{queryParams:[this.getProductNumber(),this.index],relativeTo:this.activatedRoute})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(d.F0),t.Y36(d.gz))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-product"]],inputs:{product:["item","product"],index:"index",isEditing:"isEditing"},decls:9,vars:8,consts:[[3,"click"],[1,"col-xs-8"],[1,"col-xs-4"],[3,"src","alt"]],template:function(e,n){1&e&&(t.TgZ(0,"li",0),t.NdJ("click",function(){return n.changeRoute()}),t.TgZ(1,"div",1),t.TgZ(2,"h3"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"div",2),t.TgZ(7,"figure"),t._UZ(8,"img",3),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Gre(" itemDetails list-group-item background col-xs-12 ",n.isEditing?"edit":"",""),t.xp6(3),t.AsE("",n.product.name," - ",n.product.price,""),t.xp6(2),t.hij("",n.product.description," "),t.xp6(3),t.Q6J("src",n.product.imagePath,t.LSH)("alt",n.product.description))},styles:["figure[_ngcontent-%COMP%]{border:2px solid var(--master_primairy_color);height:150px}li[_ngcontent-%COMP%]{margin:0;border:2px solid var(--master_third_color);color:var(--master_third_color_darker)}.edit[_ngcontent-%COMP%]{border:5px solid var(--master_secundairy_color)}"]}),r})();function F(r,o){if(1&r&&t._UZ(0,"app-product",4),2&r){const e=o.$implicit,n=o.index,i=t.oxw();t.Q6J("item",e)("index",n)("isEditing",i.isEditing)}}let M=(()=>{class r{constructor(e){this.productService=e,this.shopItems=[],this.isEditing=!1}ngOnInit(){this.shopItems=this.productService.getProducts(),this.productSubscription=this.productService.productEvent.subscribe(e=>{console.log(e),this.shopItems=e})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(h.M))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-edit-items"]],decls:6,vars:1,consts:[[1,"container","col-xs-12"],[1,"col-sm-6"],[1,"list-group"],[3,"item","index","isEditing",4,"ngFor","ngForOf"],[3,"item","index","isEditing"]],template:function(e,n){1&e&&(t.TgZ(0,"article",0),t.TgZ(1,"section",1),t.TgZ(2,"ul",2),t.YNc(3,F,1,3,"app-product",3),t.qZA(),t.qZA(),t.TgZ(4,"section",1),t._UZ(5,"app-edit-item"),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngForOf",n.shopItems))},directives:[a.sg,v,U],styles:["selection[_ngcontent-%COMP%]{top:20px}"]}),r})();var N=c(5424),E=c(3453),k=c(2201);let Z=(()=>{class r{constructor(e,n){this.router=e,this.authService=n}canActivate(e,n){return this.authService.user.pipe((0,E.q)(1),(0,k.U)(i=>"ADMIN"==i.roles[0].role||this.router.createUrlTree(["/admin/client"])))}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(d.F0),t.LFG(p.e))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const w=[{path:"",component:b,canActivate:[x.a],children:[{path:"client",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-client"]],decls:8,vars:0,consts:[[1,"client"],[1,"construction"],["src","assets/Gifs/rocket.gif","alt","A little surprise"]],template:function(e,n){1&e&&(t.TgZ(0,"li",0),t.TgZ(1,"h2"),t._uU(2," We are sorry for the inconviencence"),t.qZA(),t.TgZ(3,"p"),t._uU(4," we dont have a client portal yet sorry for the trouble."),t.qZA(),t.TgZ(5,"div",1),t.TgZ(6,"figure"),t._UZ(7,"img",2),t.qZA(),t.qZA(),t.qZA())},styles:[".client[_ngcontent-%COMP%]{padding:10%;align-content:center;text-align:center;color:var(--white)}.client[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{color:var(--master_secundairy_color);width:100%!important;font-size:48px}.client[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{color:var(--master_third_color);width:100%!important;font-size:55px}.client[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{position:relative;margin:var(--margin_center_vertical)}figure[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:100%;border-radius:40%}.construction[_ngcontent-%COMP%]{top:0;margin:0 10%;position:fixed;z-index:-1;height:100%}"]}),r})()},{path:"",redirectTo:"orders"},{path:"orders",component:P,canActivate:[Z],resolve:[S]},{path:"products",component:M,canActivate:[Z],resolve:[N.M],children:[{path:":id",component:v}]}]}];let Y=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[d.Bz.forChild(w)],d.Bz]}),r})(),R=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[a.ez,s.UX,Y]]}),r})()}}]);