"use strict";(self.webpackChunkone_piece_shop=self.webpackChunkone_piece_shop||[]).push([[42],{6042:(D,p,s)=>{s.r(p),s.d(p,{AdminModule:()=>R});var u=s(6019),i=s(8651),t=s(3019),m=s(5071),d=s(1288);const T=function(){return[""]},_=function(){return["orders"]},b=function(){return["products"]};let C=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-admin-nav"]],decls:11,vars:6,consts:[[1,"adminNav","navbar-default","nav","background","navbar"],[1,"navbar-collapse"],["routerLinkActive","activeLink",3,"routerLink"]],template:function(e,o){1&e&&(t.TgZ(0,"nav",0),t.TgZ(1,"ul"),t.TgZ(2,"li",1),t.TgZ(3,"a",2),t._uU(4,"Open Orders"),t.qZA(),t.qZA(),t.TgZ(5,"li",1),t.TgZ(6,"a",2),t._uU(7,"Open Orders"),t.qZA(),t.qZA(),t.TgZ(8,"li",1),t.TgZ(9,"a",2),t._uU(10,"Edit ShopItems"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("routerLink",t.DdM(3,T)),t.xp6(3),t.Q6J("routerLink",t.DdM(4,_)),t.xp6(3),t.Q6J("routerLink",t.DdM(5,b)))},directives:[d.yS,d.Od],styles:[".adminNav[_ngcontent-%COMP%]{margin:10px auto;padding:10px;width:60%;text-align:center;justify-content:space-evenly;border:none}ul[_ngcontent-%COMP%]{list-style-type:none}"]}),r})();function q(r,n){1&r&&t._UZ(0,"app-admin-nav")}let O=(()=>{class r{constructor(e){this.authService=e,this.isAdmin=!1}ngOnInit(){this.isAdminMethod=this.authService.user.subscribe(e=>{this.isAdmin="ADMIN"==e.roles[0].role})}ngOnDestroy(){this.isAdminMethod.unsubscribe()}logOut(){this.authService.logOut()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(m.e))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-admin"]],decls:8,vars:1,consts:[[4,"ngIf"],[1,"cssSelections"],[1,"cssSelection","logout","background"],[1,"col-xs-9"],[1,"col-xs-3","btn","btn-out","btn-danger",3,"click"]],template:function(e,o){1&e&&(t.YNc(0,q,1,0,"app-admin-nav",0),t.TgZ(1,"article",1),t.TgZ(2,"section",2),t.TgZ(3,"p",3),t._uU(4,"You can log out when ever you would need."),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return o.logOut()}),t._uU(6,"Log Out"),t.qZA(),t.qZA(),t._UZ(7,"router-outlet"),t.qZA()),2&e&&t.Q6J("ngIf",o.isAdmin)},directives:[u.O5,d.lC,C],styles:[".btn-out[_ngcontent-%COMP%]{border:2px solid var(--master_third_color_darker);background:var(--master_third_color)!important}.logout[_ngcontent-%COMP%]{height:70px;justify-content:space-between}"]}),r})();var y=s(5414),I=s(3298),l=s(3994);function S(r,n){if(1&r&&(t.TgZ(0,"span"),t._UZ(1,"br"),t._uU(2),t._UZ(3,"br"),t.qZA()),2&r){const e=n.$implicit;t.xp6(2),t.AsE(" ",e.product.name," - ",e.amount,"")}}let x=(()=>{class r{constructor(e){this.orderService=e}ngOnInit(){}onChangeConfirmation(){this.order.completed=!this.order.completed,this.orderService.updateOrder(this.order)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(l.p))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-order"]],inputs:{index:"index",order:"order"},decls:15,vars:5,consts:[[1,"list-group-item","col-xs-12","background"],[1,"col-xs-10"],[4,"ngFor","ngForOf"],[1,"col-xs-2"],["type","button",1,"btn",3,"ngClass"]],template:function(e,o){1&e&&(t.TgZ(0,"li",0),t.TgZ(1,"div",1),t._uU(2," Amount of Products:"),t.TgZ(3,"span"),t._uU(4),t.qZA(),t._UZ(5,"br"),t._uU(6," Products:"),t.YNc(7,S,4,2,"span",2),t._uU(8," Total Price: "),t.TgZ(9,"span"),t._uU(10),t.qZA(),t._UZ(11,"br"),t.qZA(),t.TgZ(12,"div",3),t.TgZ(13,"button",4),t._uU(14),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Oqu(o.order.cart.amountOfProducts),t.xp6(3),t.Q6J("ngForOf",o.order.cart.cartItems),t.xp6(3),t.hij("\u20ac",o.order.cart.totalPrice,""),t.xp6(3),t.Q6J("ngClass",o.order.completed?"btn-danger":"btn-success"),t.xp6(1),t.hij(" ",o.order.completed?"Disconfirm":"Confirm"," "))},directives:[u.sg,u.mk],styles:["button[_ngcontent-%COMP%]{min-height:50px}span[_ngcontent-%COMP%]{text-align:right;color:var(--master_secundairy_color)}"]}),r})();function U(r,n){if(1&r&&t._UZ(0,"app-order",3),2&r){const o=n.index;t.Q6J("order",n.$implicit)("index",o)}}let F=(()=>{class r{constructor(e){this.orderHandlingService=e,this.ordersSubscription=new y.w0}ngOnInit(){this.orders=this.orderHandlingService.getAllOrders(),this.ordersSubscription=this.orderHandlingService.orderEvent.subscribe(e=>{console.log(this.orders),this.orders=e})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(I.M))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-orders"]],decls:13,vars:1,consts:[[1,"container","col-xs-12"],[1,"container-fluid"],[3,"order","index",4,"ngFor","ngForOf"],[3,"order","index"]],template:function(e,o){1&e&&(t.TgZ(0,"article",0),t.TgZ(1,"section",1),t.TgZ(2,"section",1),t.TgZ(3,"h1"),t._uU(4,"Here are the placed orders"),t.qZA(),t.TgZ(5,"p"),t._uU(6,"please press the button next to them to complete it."),t.qZA(),t.qZA(),t.TgZ(7,"section",1),t.TgZ(8,"div"),t.TgZ(9,"h3"),t._uU(10,"Orders"),t.qZA(),t.qZA(),t.TgZ(11,"ul"),t.YNc(12,U,1,2,"app-order",2),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(12),t.Q6J("ngForOf",o.orders))},directives:[u.sg,x],styles:["h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:var(--master_third_color)}p[_ngcontent-%COMP%]{color:var(--white)}"]}),r})();var P=s(6147),g=s(7534);let N=(()=>{class r{constructor(e,o){this.requestService=e,this.orderService=o}resolve(e,o){const c=this.orderService.getOrders();return void 0===c.length||0===c.length?this.requestService.requestOfOrder("all","get",null):c}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(g.s),t.LFG(l.p))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var h=s(7296);let E=(()=>{class r{constructor(e,o,c,a){this.route=e,this.activeRoute=o,this.productService=c,this.requestService=a,this.isEditing=!1}ngOnInit(){this.initForm(),this.startSubscribe()}startSubscribe(){this.editSubscription=this.activeRoute.params.subscribe(e=>{console.log(e),this.currentId=e.id,this.isEditing=!isNaN(+e.id),this.initForm()})}initForm(){let e="",o="",c=0,a="",A="";this.isEditing&&(this.product=this.productService.getProduct(this.currentId),e=this.product.name,o=this.product.description,c=this.product.price,a=this.product.category,A=this.product.imagePath),this.editItemForm=new i.cw({name:new i.NI(e,i.kI.required),description:new i.NI(o,i.kI.required),price:new i.NI(c,i.kI.required),category:new i.NI(a,i.kI.required),imagePath:new i.NI(A,i.kI.required)})}onSubmit(){if(this.isEditing){this.productService.updateProduct(Number(this.currentId),this.editItemForm.value);const e=Number(this.product.productNumber).toString();console.log(e),this.saveChanges("put",e)}else this.productService.addProduct(this.product=this.editItemForm.value),this.saveChanges("put","new");this.redirect()}saveChanges(e,o){this.requestService.requestOfProduct(o,e,this.product).subscribe()}onDelete(){this.productService.deleteProduct(this.currentId);const e=Number(this.product.productNumber).toString();this.saveChanges("delete",e),this.redirect()}redirect(){this.editItemForm.reset(),this.isEditing=!1,this.route.navigate(["../"],{relativeTo:this.activeRoute})}ngOnDestroy(){this.editSubscription.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(d.F0),t.Y36(d.gz),t.Y36(h.M),t.Y36(g.s))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-edit-item"]],decls:37,vars:5,consts:[[1,"col-xs-12"],[1,"editItemForm",3,"formGroup","ngSubmit"],[1,"row"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],[1,"form-group"],["for","name"],["formControlName","name","type","text","id","name",1,"form-control"],["for","price"],["formControlName","price","type","text","id","price",1,"form-control"],["for","imagePath"],["formControlName","imagePath","type","text","id","imagePath",1,"form-control"],["for","category"],["formControlName","category","type","text","id","category",1,"form-control"],[1,"img-responsive",3,"src"],["for","description"],["formControlName","description","id","description","rows","6",1,"form-control"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0),t.TgZ(1,"form",1),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(2,"div",2),t.TgZ(3,"div",0),t.TgZ(4,"button",3),t._uU(5),t.qZA(),t.TgZ(6,"button",4),t.NdJ("click",function(){return o.onDelete()}),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"div",2),t.TgZ(9,"div",0),t.TgZ(10,"div",5),t.TgZ(11,"label",6),t._uU(12,"Name of Product"),t.qZA(),t._UZ(13,"input",7),t.qZA(),t.qZA(),t.TgZ(14,"div",0),t.TgZ(15,"div",5),t.TgZ(16,"label",8),t._uU(17,"Price"),t.qZA(),t._UZ(18,"input",9),t.qZA(),t.qZA(),t.TgZ(19,"div",0),t.TgZ(20,"div",5),t.TgZ(21,"label",10),t._uU(22,"Image URL"),t.qZA(),t._UZ(23,"input",11),t.qZA(),t.qZA(),t.TgZ(24,"div",0),t.TgZ(25,"div",5),t.TgZ(26,"label",12),t._uU(27,"Category's (split by ',' )"),t.qZA(),t._UZ(28,"input",13),t.qZA(),t.qZA(),t.TgZ(29,"div",0),t.TgZ(30,"div",5),t._UZ(31,"img",14),t.qZA(),t.qZA(),t.TgZ(32,"div",0),t.TgZ(33,"div",5),t.TgZ(34,"label",15),t._uU(35,"description"),t.qZA(),t._UZ(36,"textarea",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("formGroup",o.editItemForm),t.xp6(3),t.Q6J("disabled",!o.editItemForm.valid),t.xp6(1),t.Oqu(o.isEditing?"Save":"Add"),t.xp6(2),t.Oqu(o.isEditing?"Remove":"Clear"),t.xp6(24),t.Q6J("src",o.editItemForm.get("imagePath").value,t.LSH))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u],styles:[".editItemForm[_ngcontent-%COMP%]{color:var(--master_third_color_darker)}"]}),r})();const M=function(r){return[r]};let J=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-product"]],inputs:{product:["item","product"],index:"index"},decls:9,vars:8,consts:[[1,"itemDetails","list-group-item","background","col-xs-12",3,"routerLink"],[1,"col-xs-8"],[1,"col-xs-4"],[3,"src","alt"]],template:function(e,o){1&e&&(t.TgZ(0,"li",0),t.TgZ(1,"div",1),t.TgZ(2,"h3"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"div",2),t.TgZ(7,"figure"),t._UZ(8,"img",3),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("routerLink",t.VKq(6,M,o.index)),t.xp6(3),t.AsE("",o.product.name," - ",o.product.price,""),t.xp6(2),t.hij("",o.product.description," "),t.xp6(3),t.Q6J("src",o.product.imagePath,t.LSH)("alt",o.product.description))},directives:[d.rH],styles:["figure[_ngcontent-%COMP%]{border:2px solid var(--master_primairy_color);height:150px}li[_ngcontent-%COMP%]{margin:0;border:2px solid var(--master_third_color);color:var(--master_third_color_darker)}"]}),r})();function k(r,n){if(1&r&&t._UZ(0,"app-product",4),2&r){const e=n.$implicit,o=n.index,c=t.oxw();t.Q6J("item",e)("index",o)("isEditing",c.isEditing)}}let v=(()=>{class r{constructor(e){this.productService=e,this.shopItems=[],this.isEditing=!1}ngOnInit(){this.shopItems=this.productService.getProducts(),this.productSubscription=this.productService.productEvent.subscribe(e=>{this.shopItems=e})}onEditItem(e){this.isEditing=!0}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(h.M))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-edit-items"]],decls:6,vars:1,consts:[[1,"container","col-xs-12"],[1,"col-sm-6"],[1,"list-group"],[3,"item","index","isEditing",4,"ngFor","ngForOf"],[3,"item","index","isEditing"]],template:function(e,o){1&e&&(t.TgZ(0,"article",0),t.TgZ(1,"section",1),t.TgZ(2,"ul",2),t.YNc(3,k,1,3,"app-product",3),t.qZA(),t.qZA(),t.TgZ(4,"section",1),t._UZ(5,"app-edit-item"),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngForOf",o.shopItems))},directives:[u.sg,E,J],styles:[""]}),r})();var Z=s(5424),L=s(3453),w=s(2201);let f=(()=>{class r{constructor(e,o){this.router=e,this.authService=o}canActivate(e,o){return this.authService.user.pipe((0,L.q)(1),(0,w.U)(c=>1==c.roles.length||this.router.createUrlTree(["/admin/"])))}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(d.F0),t.LFG(m.e))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Y=[{path:"",component:O,canActivate:[P.a],children:[{path:"",redirectTo:"orders"},{path:"orders",component:F,resolve:[N]},{path:"products",component:v,canActivate:[f],resolve:[Z.M],children:[{path:":id",component:v,canActivate:[f],resolve:[Z.M]}]}]}];let Q=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[d.Bz.forChild(Y)],d.Bz]}),r})(),R=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[u.ez,i.UX,Q]]}),r})()}}]);