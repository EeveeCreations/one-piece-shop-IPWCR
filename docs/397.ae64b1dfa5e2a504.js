"use strict";(self.webpackChunkone_piece_shop=self.webpackChunkone_piece_shop||[]).push([[397],{8397:(j,p,s)=>{s.r(p),s.d(p,{AdminModule:()=>R});var u=s(6019),n=s(8651),t=s(3019),A=s(242),a=s(1288);const b=function(){return["orders"]},T=function(){return["editShop"]};let C=(()=>{class o{constructor(e){this.shopService=e}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A.d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-admin"]],decls:10,vars:4,consts:[[1,"adminNav","navbar-default","nav","background","navbar"],[1,"navbar-collapse"],[3,"routerLink"],[1,"cssSelections"]],template:function(e,r){1&e&&(t.TgZ(0,"nav",0),t.TgZ(1,"ul"),t.TgZ(2,"li",1),t.TgZ(3,"a",2),t._uU(4,"Open Orders"),t.qZA(),t.qZA(),t.TgZ(5,"li",1),t.TgZ(6,"a",2),t._uU(7,"Edit ShopItems"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"article",3),t._UZ(9,"router-outlet"),t.qZA()),2&e&&(t.xp6(3),t.Q6J("routerLink",t.DdM(2,b)),t.xp6(3),t.Q6J("routerLink",t.DdM(3,T)))},directives:[a.yS,a.lC],styles:[".adminNav[_ngcontent-%COMP%]{margin:10px auto;padding:10px;width:60%;text-align:center;justify-content:space-evenly;border:none}ul[_ngcontent-%COMP%]{list-style-type:none}"]}),o})();var q=s(6801),m=s(3993),I=s(8576);function y(o,i){1&o&&(t.TgZ(0,"div"),t.TgZ(1,"label",12),t._uU(2,"E-mail: "),t.qZA(),t._UZ(3,"br"),t._UZ(4,"input",13),t._UZ(5,"br"),t.TgZ(6,"label"),t._uU(7,"Admin rights: "),t.qZA(),t._UZ(8,"br"),t._UZ(9,"input",14),t.TgZ(10,"label",15),t._uU(11,"Admin"),t.qZA(),t._UZ(12,"br"),t.qZA())}function O(o,i){1&o&&(t.TgZ(0,"div"),t.TgZ(1,"label",16),t._uU(2,"checkPassword "),t.qZA(),t._UZ(3,"br"),t._UZ(4,"input",17),t.qZA())}let U=(()=>{class o{constructor(e){this.authService=e,this.isLogIn=!0}ngOnInit(){this.initForm()}onSwitchMode(){this.isLogIn=!this.isLogIn,this.initForm()}initForm(){this.userForm=new n.cw(this.isLogIn?{name:new n.NI(null,[n.kI.required]),password:new n.NI(null,[n.kI.required,n.kI.min(6)])}:{name:new n.NI(null,[n.kI.required]),email:new n.NI(null,[n.kI.required,n.kI.email]),password:new n.NI(null,[n.kI.required,n.kI.min(6)]),admin:new n.NI(null)})}onSubmit(){!this.userForm.valid||(this.isWaiting=!0,this.checkAuthentication())}checkAuthentication(){const e=this.userForm.get("name").value,r=this.userForm.get("password").value;let c;if(this.isLogIn)c=this.authService.logIn(e,r).pipe((0,q.b)(d=>{console.log(d)}));else{const d=this.userForm.get("email").value,l=this.userForm.get("isAdmin");let _=[new m.i(2,"CLIENT")];l&&_.push(new m.i(1,"ADMIN")),c=this.authService.signUp(e,d,r,_)}c.subscribe(d=>{},d=>{this.error=d}),this.isWaiting=!1,this.userForm.reset()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(I.e))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-authentication"]],decls:23,vars:6,consts:[[1,"container","col-xs-12","background"],[1,"container-fluid"],[1,"col-xs-12"],[1,"loginForm","col-xs-12",3,"formGroup"],["for","name"],["id","name","type","name","formControlName","name"],[4,"ngIf"],["for","pass"],["id","pass","type","password","formControlName","password"],[1,"col-xs-12","loginForm"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-success",3,"click"],["for","email"],["id","email","type","email","formControlName","email"],["id","admin","value","true","type","checkbox","formControlName","admin"],["for","admin"],["for","passCheck"],["id","passCheck","type","password"]],template:function(e,r){1&e&&(t.TgZ(0,"article",0),t.TgZ(1,"section",1),t.TgZ(2,"section",2),t.TgZ(3,"form",3),t.TgZ(4,"label",4),t._uU(5,"User name: "),t.qZA(),t._UZ(6,"br"),t._UZ(7,"input",5),t._UZ(8,"br"),t.YNc(9,y,13,0,"div",6),t._UZ(10,"br"),t.TgZ(11,"label",7),t._uU(12,"Password: "),t.qZA(),t._UZ(13,"br"),t._UZ(14,"input",8),t._UZ(15,"br"),t.YNc(16,O,5,0,"div",6),t.qZA(),t.TgZ(17,"div",9),t.TgZ(18,"button",10),t.NdJ("click",function(){return r.onSubmit()}),t._uU(19),t.qZA(),t._uU(20," | "),t.TgZ(21,"button",11),t.NdJ("click",function(){return r.onSwitchMode()}),t._uU(22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("formGroup",r.userForm),t.xp6(6),t.Q6J("ngIf",!r.isLogIn),t.xp6(7),t.Q6J("ngIf",!r.isLogIn),t.xp6(2),t.Q6J("disabled",!r.userForm.valid),t.xp6(1),t.hij(" ",r.isLogIn?"Log in":"Sign up!",""),t.xp6(3),t.hij(" ",r.isLogIn?"Switch to Sign up":"Switch to Login",""))},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,u.O5,n.Wl],styles:[".loginForm[_ngcontent-%COMP%]{text-align:center;padding:20px}.loginForm[_ngcontent-%COMP%] > button.btn-primary[_ngcontent-%COMP%]{border:2px solid var(--master_third_color_darker);background:var(--master_third_color);color:var(--smokey-black)}.loginForm[_ngcontent-%COMP%] > button.btn-success[_ngcontent-%COMP%]{border:2px solid var(--master_primairy_color_light);background:var(--master_primairy_color_light);font-weight:600;color:var(--smokey-black)}.loginForm[_ngcontent-%COMP%] > label[_ngcontent-%COMP%], .loginForm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-size:16px;font-weight:bold;padding:5px;color:var(--master_secundairy_color)}input[_ngcontent-%COMP%]{color:var(--smokey-black);border:2px solid var(--master_primairy_color_light)}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:3px solid var(--master_primairy_color)}"]}),o})();var F=s(3298),g=s(3994);function S(o,i){if(1&o&&(t.TgZ(0,"span"),t._UZ(1,"br"),t._uU(2),t._UZ(3,"br"),t.qZA()),2&o){const e=i.$implicit;t.xp6(2),t.AsE(" ",e.product.name," - ",e.amount,"")}}let x=(()=>{class o{constructor(e){this.orderService=e}ngOnInit(){}onChangeConfirmation(){this.order.completed=!this.order.completed,this.orderService.updateOrder(this.order)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.p))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-order"]],inputs:{index:"index",order:"order"},decls:15,vars:5,consts:[[1,"list-group-item","col-xs-12","background"],[1,"col-xs-10"],[4,"ngFor","ngForOf"],[1,"col-xs-2"],["type","button",1,"btn",3,"ngClass"]],template:function(e,r){1&e&&(t.TgZ(0,"li",0),t.TgZ(1,"div",1),t._uU(2," Amount of Products:"),t.TgZ(3,"span"),t._uU(4),t.qZA(),t._UZ(5,"br"),t._uU(6," Products:"),t.YNc(7,S,4,2,"span",2),t._uU(8," Total Price: "),t.TgZ(9,"span"),t._uU(10),t.qZA(),t._UZ(11,"br"),t.qZA(),t.TgZ(12,"div",3),t.TgZ(13,"button",4),t._uU(14),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Oqu(r.order.cart.amountOfProducts),t.xp6(3),t.Q6J("ngForOf",r.order.cart.cartItems),t.xp6(3),t.hij("\u20ac",r.order.cart.totalPrice,""),t.xp6(3),t.Q6J("ngClass",r.order.completed?"btn-danger":"btn-success"),t.xp6(1),t.hij(" ",r.order.completed?"Disconfirm":"Confirm"," "))},directives:[u.sg,u.mk],styles:["button[_ngcontent-%COMP%]{min-height:50px}span[_ngcontent-%COMP%]{text-align:right;color:var(--master_secundairy_color)}"]}),o})();function P(o,i){if(1&o&&t._UZ(0,"app-order",3),2&o){const r=i.index;t.Q6J("order",i.$implicit)("index",r)}}let N=(()=>{class o{constructor(e){this.orderHandlingService=e}ngOnInit(){this.orders=this.orderHandlingService.getAllOrders(),this.ordersSubscription=this.orderHandlingService.orderEvent.subscribe(e=>{this.orders=e}),console.log(this.orders)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(F.M))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-orders"]],decls:13,vars:1,consts:[[1,"container","col-xs-12"],[1,"container-fluid"],[3,"order","index",4,"ngFor","ngForOf"],[3,"order","index"]],template:function(e,r){1&e&&(t.TgZ(0,"article",0),t.TgZ(1,"section",1),t.TgZ(2,"section",1),t.TgZ(3,"h1"),t._uU(4,"Here are the placed orders"),t.qZA(),t.TgZ(5,"p"),t._uU(6,"please press the button next to them to complete it."),t.qZA(),t.qZA(),t.TgZ(7,"section",1),t.TgZ(8,"div"),t.TgZ(9,"h3"),t._uU(10,"Orders"),t.qZA(),t.qZA(),t.TgZ(11,"ul"),t.YNc(12,P,1,2,"app-order",2),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(12),t.Q6J("ngForOf",r.orders))},directives:[u.sg,x],styles:["h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:var(--master_primairy_color)}p[_ngcontent-%COMP%]{color:var(--master_color)}"]}),o})();var h=s(7534);let M=(()=>{class o{constructor(e,r){this.requestService=e,this.orderService=r}resolve(e,r){const c=this.orderService.getOrders();return 0===c.length?this.requestService.requestOfOrder("all","get",null):c}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(h.s),t.LFG(g.p))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Z=s(7296);let k=(()=>{class o{constructor(e,r,c,d){this.route=e,this.activeRoute=r,this.productService=c,this.requestService=d,this.isEditing=!1}ngOnInit(){this.initForm(),this.editSubscription=this.activeRoute.params.subscribe(e=>{this.currentId=e.id,this.isEditing=!isNaN(+e.id),console.log(this.isEditing),this.initForm()})}initForm(){let e="",r="",c=0,d="",l="";this.isEditing&&(this.product=this.productService.getProduct(this.currentId),e=this.product.name,r=this.product.description,c=this.product.price,d=this.product.category,l=this.product.imagePath),this.editItemForm=new n.cw({name:new n.NI(e,n.kI.required),description:new n.NI(r,n.kI.required),price:new n.NI(c,n.kI.required),category:new n.NI(d,n.kI.required),imagePath:new n.NI(l,n.kI.required)})}onSubmit(){if(this.isEditing){this.productService.updateProduct(Number(this.currentId),this.editItemForm.value);const e=Number(this.product.productNumber).toString();console.log(e),this.saveChanges("put",e)}else this.productService.addProduct(this.product=this.editItemForm.value),this.saveChanges("put","new");this.redirect()}saveChanges(e,r){this.requestService.requestOfProduct(r,e,this.product).subscribe()}onDelete(){this.productService.deleteProduct(this.currentId);const e=Number(this.product.productNumber).toString();this.saveChanges("delete",e),this.redirect()}redirect(){this.editItemForm.reset(),this.isEditing=!1,this.route.navigate(["../editshop"],{relativeTo:this.activeRoute})}ngOnDestroy(){this.editSubscription.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.F0),t.Y36(a.gz),t.Y36(Z.M),t.Y36(h.s))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-item"]],decls:39,vars:5,consts:[[1,"col-xs-12"],[1,"editItemForm",3,"formGroup","ngSubmit"],[1,"row"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],[1,"form-group"],["for","name"],["formControlName","name","type","text","id","name",1,"form-control"],["for","price"],["formControlName","price","type","text","id","price",1,"form-control"],["for","imagePath"],["formControlName","imagePath","type","text","id","imagePath",1,"form-control"],["for","category"],["formControlName","category","type","text","id","category",1,"form-control"],[1,"img-responsive",3,"src"],["for","description"],["formControlName","description","id","description","rows","6",1,"form-control"],["formControlName","category",1,"col-xs-12"]],template:function(e,r){1&e&&(t.TgZ(0,"section",0),t.TgZ(1,"form",1),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t.TgZ(2,"div",2),t.TgZ(3,"div",0),t.TgZ(4,"button",3),t._uU(5),t.qZA(),t.TgZ(6,"button",4),t.NdJ("click",function(){return r.onDelete()}),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"div",2),t.TgZ(9,"div",0),t.TgZ(10,"div",5),t.TgZ(11,"label",6),t._uU(12,"Name of Product"),t.qZA(),t._UZ(13,"input",7),t.qZA(),t.qZA(),t.TgZ(14,"div",0),t.TgZ(15,"div",5),t.TgZ(16,"label",8),t._uU(17,"Price"),t.qZA(),t._UZ(18,"input",9),t.qZA(),t.qZA(),t.TgZ(19,"div",0),t.TgZ(20,"div",5),t.TgZ(21,"label",10),t._uU(22,"Image URL"),t.qZA(),t._UZ(23,"input",11),t.qZA(),t.qZA(),t.TgZ(24,"div",0),t.TgZ(25,"div",5),t.TgZ(26,"label",12),t._uU(27,"Category's (split by ,)"),t.qZA(),t._UZ(28,"input",13),t.qZA(),t.qZA(),t.TgZ(29,"div",0),t.TgZ(30,"div",5),t._UZ(31,"img",14),t.qZA(),t.qZA(),t.TgZ(32,"div",0),t.TgZ(33,"div",5),t.TgZ(34,"label",15),t._uU(35,"description"),t.qZA(),t._UZ(36,"textarea",16),t.qZA(),t.TgZ(37,"div",2),t._UZ(38,"div",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("formGroup",r.editItemForm),t.xp6(3),t.Q6J("disabled",!r.editItemForm.valid),t.xp6(1),t.Oqu(r.isEditing?"Save":"Add"),t.xp6(2),t.Oqu(r.isEditing?"Remove":"Clear"),t.xp6(24),t.Q6J("src",r.editItemForm.get("imagePath").value,t.LSH))},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u],styles:[".editItemForm[_ngcontent-%COMP%]{color:var(--master_third_color_darker)}"]}),o})();const w=function(o){return[o]};let E=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-product"]],inputs:{product:["item","product"],index:"index"},decls:9,vars:8,consts:[[1,"itemDetails","list-group-item","background","col-xs-12",3,"routerLink"],[1,"col-xs-8"],[1,"col-xs-4"],[3,"src","alt"]],template:function(e,r){1&e&&(t.TgZ(0,"li",0),t.TgZ(1,"div",1),t.TgZ(2,"h3"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"div",2),t.TgZ(7,"figure"),t._UZ(8,"img",3),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("routerLink",t.VKq(6,w,"../"+r.index)),t.xp6(3),t.AsE("",r.product.name," - ",r.product.price,""),t.xp6(2),t.hij("",r.product.description," "),t.xp6(3),t.Q6J("src",r.product.imagePath,t.LSH)("alt",r.product.description))},directives:[a.rH],styles:["figure[_ngcontent-%COMP%]{border:2px solid var(--master_primairy_color);height:150px}li[_ngcontent-%COMP%]{margin:0;border:2px solid var(--master_third_color);color:var(--master_third_color_darker)}"]}),o})();function J(o,i){if(1&o&&t._UZ(0,"app-product",4),2&o){const r=i.index;t.Q6J("item",i.$implicit)("index",r)}}let v=(()=>{class o{constructor(e){this.productService=e,this.isEditing=!1}ngOnInit(){this.shopItems=this.productService.getProducts(),this.productSubscription=this.productService.productEvent.subscribe(e=>{this.shopItems=e})}onEditItem(e){this.isEditing=!0}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Z.M))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-items"]],decls:6,vars:1,consts:[[1,"col-xs-12"],[1,"col-sm-6"],[1,"list-group"],[3,"item","index",4,"ngFor","ngForOf"],[3,"item","index"]],template:function(e,r){1&e&&(t.TgZ(0,"article",0),t.TgZ(1,"section",1),t.TgZ(2,"ul",2),t.YNc(3,J,1,2,"app-product",3),t.qZA(),t.qZA(),t.TgZ(4,"section",1),t._UZ(5,"app-edit-item"),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngForOf",r.shopItems))},directives:[u.sg,k,E],styles:[""]}),o})();var f=s(5424);const L=[{path:"",component:C,children:[{path:"login",component:U},{path:"orders",component:N,resolve:[M]},{path:"editShop",component:v,resolve:[f.M]},{path:":id",component:v,resolve:[f.M]}]}];let Q=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[a.Bz.forChild(L)],a.Bz]}),o})();var Y=s(456);let R=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.ez,n.UX,Y.ShopModule,Q]]}),o})()}}]);